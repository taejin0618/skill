---
name: qa-testcase-writer
description: >
  TestRail 호환 CSV 테스트 케이스 생성 스킬.
  트리거: (1) "테스트 케이스 만들어줘/작성해줘" (2) "TestRail CSV 생성" (3) "QA 테스트 설계"
  (4) Figma/Axure URL과 함께 테스트 요청 (5) Jira/Confluence 문서로 테스트 케이스 요청
  (6) 스크린샷/PPT/PDF 업로드 후 테스트 케이스 요청 (7) 웹사이트 URL로 테스트 케이스 요청.
  입력: Figma, Axure, Jira, Confluence, PPT, PDF, 스크린샷, 웹 URL 등 요구사항 문서.
  출력: CSV 테스트케이스, 질문 문서 (상세 내용은 "최종 출력물" 섹션 참조)
---

# QA 테스트 케이스 작성 스킬

요구사항 문서를 분석하여 TestRail 호환 CSV 테스트 케이스를 생성한다.

## 핵심 원칙

1. **정확성**: 불명확한 요구사항은 질문.md에 정리. 추측 금지.
2. **실행 가능성**: 누구나 동일하게 실행할 수 있도록 구체적인 값 명시.
3. **완전한 커버리지**: 아래 필수 커버리지 체크리스트 100% 충족 필수.

---

## 최종 출력물 (2개 파일)

### 파일명 규칙

**형식**: `[기능명]_테스트케이스.csv` / `[기능명]_질문.md`

**작성 규칙**:
- ✅ 한글 사용 가능: `회원가입_테스트케이스.csv`
- ✅ 허용 특수문자: 언더스코어(_), 하이픈(-)만 사용
- ❌ 공백 금지: `회원 가입_테스트케이스.csv` (X)
- ❌ 기타 특수문자 금지: `회원가입!_테스트케이스.csv` (X)

**예시**:
- ✅ `로그인_테스트케이스.csv`
- ✅ `주문-결제_테스트케이스.csv`
- ✅ `user-management_testcase.csv`
- ❌ `로그인 테스트케이스.csv` (공백)
- ❌ `주문&결제_테스트케이스.csv` (특수문자)

`[기능명]_테스트케이스/` 폴더에 아래 2개 파일 생성:

| #   | 파일명                         | 용도                                   | 템플릿 참조                                  |
| --- | ------------------------------ | -------------------------------------- | -------------------------------------------- |
| 1   | **[기능명]\_테스트케이스.csv** | TestRail 테스트케이스 업로드용         | -                                            |
| 2   | **[기능명]\_질문.md**          | 불명확한 요구사항 질문 (요청 URL 포함) | `references/templates/questions-template.md` |

---

## ⚠️ 필수 커버리지 체크리스트 (100% 충족 필수)

> **중요**: 테스트케이스 작성 완료 전 아래 모든 항목을 반드시 확인하고, 누락된 항목이 있으면 테스트케이스를 추가해야 한다.

### 1. 기능 커버리지 (100% 필수)

화면에 보이는 모든 UI 요소에 대해 테스트케이스가 존재해야 한다.

| #    | 체크 항목                                                   | 필수 |
| ---- | ----------------------------------------------------------- | ---- |
| 1-1  | 모든 버튼 클릭 동작 (검색, 저장, 삭제, 수정, 취소 등)       | ✅   |
| 1-2  | 모든 입력란 입력 테스트 (텍스트, 숫자, 날짜 등)             | ✅   |
| 1-3  | 모든 드롭다운/셀렉트박스 선택 테스트                        | ✅   |
| 1-4  | 모든 체크박스/라디오 버튼 선택 테스트                       | ✅   |
| 1-5  | 페이지네이션 테스트 (첫 페이지, 마지막 페이지, 페이지 이동) | ✅   |
| 1-6  | 검색/필터 기능 테스트                                       | ✅   |
| 1-7  | 정렬 기능 테스트 (오름차순, 내림차순)                       | ✅   |
| 1-8  | 다운로드 기능 테스트 (엑셀, PDF, 이미지 등)                 | ✅   |
| 1-9  | 업로드 기능 테스트 (파일 선택, 드래그앤드롭)                | ✅   |
| 1-10 | 출력/인쇄 기능 테스트                                       | ✅   |
| 1-11 | 발송/전송 기능 테스트 (이메일, 알림, SMS)                   | ✅   |
| 1-12 | 일괄 처리 기능 테스트 (다중 선택 후 일괄 적용)              | ✅   |
| 1-13 | 상태 변경 기능 테스트 (승인, 반려, 삭제 등)                 | ✅   |
| 1-14 | 모달/팝업 열기/닫기 테스트                                  | ✅   |
| 1-15 | 탭 전환 테스트                                              | ✅   |

### 2. 입력값 검증 커버리지 (필수)

모든 입력란에 대해 아래 케이스 테스트 필수.

> 💡 **상세 예시**: 각 테스트 유형별 구체적인 입력값과 예상 결과는 `references/input-validation-examples.md` 참조

| #    | 체크 항목                  | 필수 |
| ---- | -------------------------- | ---- |
| 2-1  | 빈 값 / null 입력          | ✅   |
| 2-2  | 공백만 입력 (스페이스, 탭) | ✅   |
| 2-3  | 앞뒤 공백 포함 입력        | ✅   |
| 2-4  | 최소값 (경계값 하한)       | ✅   |
| 2-5  | 최대값 (경계값 상한)       | ✅   |
| 2-6  | 최소값 -1 (경계값 벗어남)  | ✅   |
| 2-7  | 최대값 +1 (경계값 벗어남)  | ✅   |
| 2-8  | 특수문자 입력 (!@#$%^&\*)  | ✅   |
| 2-9  | 이모지 입력 (😀🎉)         | ✅   |
| 2-10 | 한글/영문/숫자 혼합        | ✅   |

### 3. 날짜 입력 커버리지 (날짜 필드 존재 시 필수)

| #   | 체크 항목                       | 필수 |
| --- | ------------------------------- | ---- |
| 3-1 | 유효한 날짜 입력                | ✅   |
| 3-2 | 날짜 역순 (시작일 > 종료일)     | ✅   |
| 3-3 | 잘못된 날짜 형식 (2025/13/45)   | ✅   |
| 3-4 | 미래 날짜 입력                  | ✅   |
| 3-5 | 과거 날짜 입력 (허용 범위 확인) | ✅   |
| 3-6 | 오늘 날짜 입력                  | ✅   |

### 4. 동작/상호작용 커버리지 (필수)

| #   | 체크 항목                      | 필수 |
| --- | ------------------------------ | ---- |
| 4-1 | 더블클릭 / 중복 요청 방지      | ✅   |
| 4-2 | 브라우저 뒤로가기 후 동작      | ✅   |
| 4-3 | 브라우저 새로고침 후 동작      | ✅   |
| 4-4 | 필수 입력 누락 후 제출 시도    | ✅   |
| 4-5 | 폼 입력 중 페이지 이탈 시 확인 | ✅   |

### 5. UX 피드백 커버리지 (필수)

| #   | 체크 항목                            | 필수 |
| --- | ------------------------------------ | ---- |
| 5-1 | 로딩 인디케이터 표시 확인            | ✅   |
| 5-2 | 성공 메시지 표시 확인                | ✅   |
| 5-3 | 실패/에러 메시지 표시 확인           | ✅   |
| 5-4 | 삭제 등 중요 작업 전 확인 다이얼로그 | ✅   |
| 5-5 | 입력값 유효성 검증 피드백 (실시간)   | ✅   |

### 6. 접근성(a11y) 검증 커버리지 (선택)

웹 접근성 준수가 필요한 프로젝트에서 사용

| #   | 체크 항목                     | 필수 |
| --- | ----------------------------- | ---- |
| 6-1 | 키보드만으로 모든 기능 사용   | ✅   |
| 6-2 | Tab 키 순서 논리적 배치       | ✅   |
| 6-3 | 포커스 표시 명확성            | ✅   |
| 6-4 | 스크린 리더 호환 (aria 속성)  | ✅   |
| 6-5 | 색상 대비 충분성 (WCAG 2.1)   | ✅   |

### 7. 데이터 상태 커버리지 (필수)

| #   | 체크 항목                    | 필수 |
| --- | ---------------------------- | ---- |
| 6-1 | 데이터 0건일 때 화면 표시    | ✅   |
| 6-2 | 데이터 1건일 때 동작         | ✅   |
| 6-3 | 데이터 다건 (10건 이상) 동작 | ✅   |
| 6-4 | 대용량 데이터 (100건+) 성능  | ✅   |

---

## 작업 프로세스

### 1단계: 문서 분석

| 입력 유형        | 도구/방법                                          | 추출 항목                                                        |
| ---------------- | -------------------------------------------------- | ---------------------------------------------------------------- |
| Figma URL        | Figma MCP                                          | Component, Text, Input 속성, Interactive 흐름, 모든 UI 구성 요소 |
| Axure URL        | 1순위: claude-in-chrome MCP, 2순위: playwright MCP | Widget Notes, Interaction, Dynamic Panel, 모든 UI 구성 요소      |
| Jira/Confluence  | Atlassian MCP                                      | 이슈 설명, AC, 첨부파일, 연결 이슈, 컨플루언스 페이지 모든 내용  |
| 일반 URL         | 1순위: claude-in-chrome MCP, 2순위: playwright MCP | 모든 UI 구성요소, 라벨, 안내문구, 화면 전환 경로                 |
| 스크린샷/PPT/PDF | 이미지 분석                                        | 모든 UI 구성요소, 라벨, 화면 전환 경로                           |

### 1-1단계: 브라우저 및 환경 고려사항

테스트 대상 환경을 명확히 하여 커버리지 누락 방지

**브라우저**:
- 데스크톱: Chrome 최신, Firefox 최신, Safari 최신, Edge 최신
- 모바일: iOS Safari, Android Chrome

**화면 해상도**:
- 모바일: 375px (iPhone SE 기준)
- 태블릿: 768px (iPad 기준)
- 데스크톱: 1920px (Full HD 기준)

**특정 브라우저 전용 기능 확인**:
- 파일 업로드: 브라우저별 파일 선택 UI 차이
- 날짜 선택: 네이티브 date picker vs 커스텀 UI

### 2단계: UI 요소 목록 작성

문서 분석 후 화면의 모든 UI 요소를 목록화한다.

```
예시:
- 버튼: [검색], [초기화], [엑셀 다운로드], [저장], [삭제]
- 입력란: 이름, 이메일, 시작일, 종료일
- 드롭다운: 상태, 부서
- 체크박스: 전체 선택, 개별 선택
- 테이블: 페이지네이션, 정렬
```

### 3단계: 커버리지 체크리스트 대조

2단계 UI 요소 목록을 1~7번 커버리지 체크리스트와 대조하여 필요한 테스트케이스 도출.

### 4단계: Section 구조 설계

**최대 3 depth 권장. 과도한 중첩 금지.**

```
✅ 좋은 예:
로그인
├── 정상 케이스
├── 오류 케이스
└── 엣지 케이스

❌ 나쁜 예:
회원관리 > 인증 > 로그인 > 입력검증 > 이메일 > 특수문자
```

### 5단계: 테스트케이스 작성

1. **정상 케이스**: Happy Path 중심, Priority High 이상
2. **오류 케이스**: 잘못된 입력, 실패 상황
3. **엣지케이스**: `references/edge-cases.md` 체크리스트 활용
4. **테스트 기법**: `references/test-techniques.md` 참조 (경계값, 동등분할, 상태전환)
5. **UX 검증**: `references/nielsen-heuristics.md` 참조

### 6단계: 질문.md 작성

1. `references/templates/questions-template.md` 템플릿 참조
2. 불명확한 요구사항을 우선순위별(Critical/High/Medium/Low)로 정리
3. 헤더에 요구사항 URL 필수 포함

### 7단계: 커버리지 최종 검증

**테스트케이스 작성 완료 후 반드시 수행:**

1. 1~7번 커버리지 체크리스트 항목별로 해당 테스트케이스 존재 여부 확인
2. 누락된 항목 발견 시 테스트케이스 추가
3. 해당 기능에 적용되지 않는 항목은 N/A 처리 (예: 날짜 필드 없으면 3번 전체 N/A)

### 8단계: 검증 및 출력

#### 8-1. CSV 포맷 검증

```bash
python scripts/validate_csv.py [파일명].csv
```

**정상 출력 예시**:
```
✅ CSV 포맷 검증 완료
- 컬럼 개수: 7개 (정상)
- 필수 컬럼 존재: OK
- 인코딩: UTF-8 (정상)
```

**에러 발생 시**:
```
❌ 오류: 4번째 라인에 컬럼 개수 불일치
예상: 7개, 실제: 6개
```
→ **대응**: CSV 파일의 4번째 라인 확인 후 누락된 컬럼 추가

**일반적인 오류와 해결 방법**:
| 오류 메시지 | 원인 | 해결 방법 |
|------------|------|----------|
| "컬럼 개수 불일치" | 셀 내 따옴표 미처리 | 큰따옴표를 ""로 이스케이프 |
| "인코딩 오류" | 파일 저장 시 잘못된 인코딩 | UTF-8로 재저장 |
| "필수 컬럼 누락" | 컬럼명 오타 | CSV 헤더 확인 |

#### 8-2. 품질 검증

```bash
python scripts/quality_check.py [파일명].csv
```

**정상 출력 예시**:
```
✅ 품질 검증 완료
- 테스트케이스: 총 45개
- Priority 분포: High 20개, Medium 15개, Low 10개
- Preconditions 작성률: 100%
```

**경고 발생 시**:
```
⚠️ 경고: 10개 테스트케이스에 Preconditions 누락
→ TC-015, TC-023, TC-031...
```
→ **대응**: 해당 테스트케이스에 Preconditions 추가

#### 8-3. TestRail 업로드 호환성 확인

```bash
python scripts/testrail_upload_check.py [파일명].csv
```

**정상 출력 예시**:
```
✅ TestRail 업로드 준비 완료
- Section Hierarchy: 정상
- 예약어 충돌: 없음
- 최대 길이 초과: 없음
```

**최종 확인**: 모든 검증 스크립트 통과 후 CSV 파일 산출

---

## CSV 형식 (TestRail 호환)

### 컬럼 구조

```csv
"Section","Section Hierarchy","Title","Preconditions","Steps","Expected Result","Priority"
```

### Section Hierarchy 작성 규칙

| depth | Section     | Section Hierarchy                  | 설명        |
| ----- | ----------- | ---------------------------------- | ----------- |
| 1     | 로그인      | (빈 값)                            | 최상위 폴더 |
| 2     | 정상 케이스 | 로그인 > 정상 케이스               | 하위 폴더   |
| 3     | 이메일 검증 | 로그인 > 오류 케이스 > 이메일 검증 | 최하위 폴더 |

---

## CSV 예시

```csv
"Section","Section Hierarchy","Title","Preconditions","Steps","Expected Result","Priority"
"로그인","","","","","","Highest"
"정상 케이스","로그인 > 정상 케이스","유효한 계정으로 로그인","1. 로그인 권한: 일반 사용자
2. 접근 경로: 메인 > 로그인
3. 테스트 계정: test@example.com / Pass1234!","1. 로그인 페이지 접속 (URL: /login)
2. 이메일 입력란에 'test@example.com' 입력
3. 비밀번호 입력란에 'Pass1234!' 입력
4. '로그인' 버튼 클릭","1. 대시보드 페이지로 이동 (URL: /dashboard)
2. 우측 상단에 'test@example.com' 표시
3. '로그인 성공' 토스트 메시지 표시","High"
"오류 케이스","로그인 > 오류 케이스","잘못된 비밀번호 입력","1. 회원가입 완료된 계정 존재
2. 올바른 이메일: test@example.com","1. 로그인 페이지 접속
2. 이메일 입력란에 'test@example.com' 입력
3. 비밀번호 입력란에 'WrongPass123!' 입력
4. '로그인' 버튼 클릭","1. 로그인 실패
2. '비밀번호가 일치하지 않습니다' 에러 메시지 표시
3. 비밀번호 입력란 초기화","High"
"엣지 케이스","로그인 > 엣지 케이스","빈 값으로 로그인 시도","1. 로그인 페이지 접속","1. 이메일, 비밀번호 입력란 비워둠
2. '로그인' 버튼 클릭","1. '이메일을 입력해주세요' 에러 메시지 표시
2. 로그인 버튼 비활성화 또는 제출 차단","Medium"
"엣지 케이스","로그인 > 엣지 케이스","공백만 입력 후 로그인 시도","1. 로그인 페이지 접속","1. 이메일 입력란에 '   ' (공백 3개) 입력
2. 비밀번호 입력란에 '   ' (공백 3개) 입력
3. '로그인' 버튼 클릭","1. 공백 trim 처리 후 빈 값으로 인식
2. '이메일을 입력해주세요' 에러 메시지 표시","Medium"
"엣지 케이스","로그인 > 엣지 케이스","더블클릭으로 로그인 시도","1. 로그인 페이지 접속
2. 유효한 계정 정보 입력 완료","1. '로그인' 버튼 빠르게 2회 클릭","1. 중복 요청 방지 처리
2. 로그인 1회만 처리됨
3. 중복 로그인 시도 에러 없음","Medium"
```

---

## 필드별 작성 규칙

### 공통 규칙

- 동사 포함 필수: 입력, 선택, 이동, 확인
- **줄바꿈 규칙**: CSV 내에서 실제 줄바꿈 사용, 이스케이프 문자 금지
  - ✅ **올바른 방법**: 셀 내에서 Enter 키로 물리적 줄바꿈 입력
  - ❌ **잘못된 방법**: \n 이스케이프 문자 사용 금지

  **예시**:
  ```csv
  "Steps","1. 로그인 페이지 접속
  2. 이메일 입력란에 'test@example.com' 입력
  3. 비밀번호 입력란에 'Pass1234!' 입력"
  ```

  **❌ 절대 금지**:
  ```csv
  "Steps","1. 로그인 페이지 접속\n2. 이메일 입력란에 'test@example.com' 입력"
  ```

**Title** (최대 30자)

- 동사 포함 필수: 입력, 선택, 이동, 확인
- ✅ "유효한 이메일로 로그인 성공" / ❌ "로그인 테스트"

**Preconditions (4가지 필수 항목)**

⚠️ **중요**: 모든 테스트케이스는 아래 4가지 항목을 **반드시** 포함해야 합니다.

**필수 템플릿**:
```
1. 로그인 권한: [필수 권한 역할]
   - 관리자 / 교육담당자 / 일반사용자 / 게스트 중 선택

2. 접근 경로: [메뉴 구조]
   - 형식: 메인 > 서브메뉴 > 화면명
   - 예: 메인 > 회원관리 > 회원목록

3. 테스트 데이터: [구체적 값]
   - 계정: test@example.com / Pass1234!
   - 날짜: 2025-01-15 ~ 2025-01-31
   - 상태: 승인 완료

4. 사전 상태: [필요 시 명시, 불필요하면 "없음"]
   - 예: 회원 10건 이상 등록 완료
   - 예: 없음
```

**작성 예시**:
```
1. 로그인 권한: 일반사용자
2. 접근 경로: 메인 > 로그인
3. 테스트 데이터: test@example.com / Pass1234!
4. 사전 상태: 회원가입 완료된 계정 존재
```

**Steps**

- 한 단계 = 하나의 행동
- 입력값은 작은따옴표로 명시: 'test@example.com'
- 버튼명: [검색], [초기화], [엑셀 다운로드], [저장], [삭제] 와 같은 버튼명은 대괄호[버튼명] 과 같이 작성

**Expected Result**

- 측정 가능한 기준 명시
- UI 변화 + 데이터 변화 + 상태 변화 포함
- 구체적 메시지 텍스트 명시 (예: '저장되었습니다')
- 버튼명: [검색], [초기화], [엑셀 다운로드], [저장], [삭제] 와 같은 버튼명은 대괄호[버튼명] 과 같이 작성

**Priority**

| 등급    | 기준                     | 예시                     |
| ------- | ------------------------ | ------------------------ |
| Highest | 서비스 중단, 데이터 손실 | 결제 실패, 개인정보 유출 |
| High    | 핵심 기능 오류           | 로그인 불가, 주문 불가   |
| Medium  | 일반 기능 오류           | 필터 오작동, 정렬 오류   |
| Low     | 경미한 UI 오류           | 버튼 색상, 간격          |
| Lowest  | 문구 오타                | 띄어쓰기, 오탈자         |

---

## 레퍼런스

### 테스트 설계 참조

| 파일                               | 용도                     | 참조 시점               |
| ---------------------------------- | ------------------------ | ----------------------- |
| `references/edge-cases.md`         | 엣지케이스 체크리스트    | 엣지케이스 작성 시      |
| `references/test-techniques.md`    | 경계값/동등분할/상태전환 | 테스트 설계 시          |
| `references/nielsen-heuristics.md` | UX 사용성 검증           | UX 테스트케이스 작성 시 |

### 출력 문서 템플릿 양식 필수 참조

| 파일                                         | 용도                   | 참조 시점       |
| -------------------------------------------- | ---------------------- | --------------- |
| `references/templates/questions-template.md` | 질문 템플릿 (URL 포함) | 질문.md 작성 시 |

---

## 작성 완료 전 최종 검증

산출물 생성 완료 후 아래 검증 필수:

### 테스트케이스.csv 검증

```
□ Preconditions에 로그인 권한과 테스트 데이터 명시?
□ Expected Result에 구체적인 메시지 텍스트 명시?
□ Section 구조가 3 depth 이내?
□ 줄바꿈으로 구분 되어 있고 줄바꿈 문자(\n 문자 절대 사용 금지) 사용 되지는 않았는지?
```

테스트케이스 CSV 생성 완료 후 아래 검증 필수:

### 커버리지 검증 (필수)

```
□ 1. 기능 커버리지: 화면의 모든 버튼/입력란/드롭다운 테스트 존재?
□ 2. 입력값 검증: 빈 값, 경계값, 특수문자 테스트 존재?
□ 3. 날짜 입력: 날짜 필드 있으면 역순/형식오류 테스트 존재?
□ 4. 동작/상호작용: 더블클릭, 뒤로가기 테스트 존재?
□ 5. UX 피드백: 성공/실패 메시지, 로딩 표시 테스트 존재?
□ 6. 접근성 검증 (선택): 키보드 네비게이션, 스크린 리더 호환 테스트 존재?
□ 7. 데이터 상태: 0건/1건/다건 테스트 존재?
```

### 질문.md 검증

```
□ 헤더에 요구사항 URL 포함?
□ 질문이 우선순위별(Critical/High/Medium/Low)로 분류?
□ 각 질문에 관련 화면/기능 명시?
□ questions-template.md 파일의 형식과 일치 하는지?
```

### 누락 발견 시

위 검증에서 누락 발견 시 **반드시 테스트케이스 추가** 후 CSV 재생성.
